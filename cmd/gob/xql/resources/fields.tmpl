// Code generated by dvo xql. DO NOT EDIT.
// Generated at: {{ .GeneratedAt.Format "2006-01-02 15:04:05" }}

package {{ .PackageName }}

import (
    . "{{ .EntityImportPath }}"
    "{{ .ModulePath }}/entity"
{{- range .Imports }}
    "{{ . }}"
{{- end }}
)

// {{ .StructName }}Fields provides access to the entity's field definitions.
var (
{{- range .Fields }}
    {{ .GoName }} = entity.Field[{{ $.StructName }}, {{ .GoType }}]("{{ .GoName }}")
{{- end }}
)

// All returns all field providers for {{ .StructName }} in a stable order.
func All() []entity.FieldProvider[{{ .StructName }}] {
    return []entity.FieldProvider[{{ .StructName }}]{
{{- range .Fields }}
        {{ .GoName }},
{{- end }}
    }
}

// AllExclude returns all field providers for {{ .StructName }} except the provided ones.
//
// Example:
//  fields := AllExclude(UpdatedAt, UpdatedBy)
func AllExclude(exclude ...entity.FieldProvider[{{ .StructName }}]) []entity.FieldProvider[{{ .StructName }}] {
    if len(exclude) == 0 {
        return All()
    }

    // Use QualifiedName to compare fields deterministically.
    excluded := make(map[string]struct{}, len(exclude))
    for _, f := range exclude {
        excluded[f.QualifiedName()] = struct{}{}
    }

    all := All()
    out := make([]entity.FieldProvider[{{ .StructName }}], 0, len(all))
    for _, f := range all {
        if _, ok := excluded[f.QualifiedName()]; ok {
            continue
        }
        out = append(out, f)
    }
    return out
}
